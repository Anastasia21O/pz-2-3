<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/>
  <title>Task1</title>
  <link rel="stylesheet" type="text/css" href="task1.css">
</head>
<body>

<img src="img/1.png" class="virsta-img">
<img src="img/1.png" class="virsta-img">
<img src="img/1.png" class="virsta-img">

<div class="virsta-href">
  <h4 id="virsta-header1"><a href="http://htmlbook.ru/samhtml/ssylki" class="virsta-link">посилання1</a></h4>
  <label for="virsta-header1" class="virsta-label"></label>
</div>

<div class="virsta-href">
  <h4 id="virsta-header2"><a href="http://htmlbook.ru/samhtml/ssylki" class="virsta-link">посилання2</a></h4>
  <label for="virsta-header2" class="virsta-label"></label>
</div>

<div class="virsta-href">
  <h4 id="virsta-header3"><a href="http://htmlbook.ru/samhtml/ssylki" class="virsta-link">посилання3</a></h4>
  <label for="virsta-header3" class="virsta-label"></label>
</div>

<div class="virsta-input1">
  <form class="virsta-input virsta-form">
    <ul>
      <li class="virsta-input-firstname ">
        <label for="virsta-input-firstname1">firstname: </label>
        <input type="text" id="virsta-input-firstname1" class="virsta-input-name" required>
      </li>
      <li class="virsta-input-last">
        <label for="virsta-input-last1">last: </label>
        <input type="text" id="virsta-input-last1" class="virsta-input-name" required>
      </li>
      <li class="virsta-input-age">
        <label for="virsta-input-age1">age: </label>
        <input type="text" id="virsta-input-age1" required>
      </li>
    </ul>
    <input type="button" class="virsta-button" value="Перевірити">
  </form>
  <h3 id="demo" style="display: none">You are right!</h3>
</div>

<script>
  let cont = [0, 0, 0];
  let imges = document.querySelectorAll('.virsta-img');
  let links = document.querySelectorAll('.virsta-link');
  let labels = document.querySelectorAll('.virsta-label');
  let firstname = document.querySelector('#virsta-input-firstname1');
  let lastname = document.querySelector('#virsta-input-last1');
  let age = document.querySelector('#virsta-input-age1');
  let demo = document.querySelector('#demo');
  let button = document.querySelector('.virsta-button');
  let regNum = /^\d+$/;
  let regStr = /^[A-Za-z]+$/;
  let list_flag = [false, false, false];

  for (let i = 0; i < imges.length; i++) {
    imges[i].addEventListener("contextmenu", function (e) {
      e.preventDefault();
      let elem = e.target;
      if (cont[i] === 8) cont[i] = 0;
      cont[i]++;
      // elem.classList.toggle("rotated");
      elem.style.transform = `rotate(${cont[i] * 45}deg)`;
    });
    imges[i].addEventListener("click", function (e) {
      alert(links[i].href);
    })
  }

  for (let i = 0; i < links.length; i++) {
    links[i].addEventListener("mouseover", function (e) {
      labels[i].textContent = ` (${links[i].href})`;
    });
    links[i].addEventListener('mouseout', function (e) {
      labels[i].textContent = "";
    });
  }

  firstname.addEventListener('keyup', (event) => {
    isOnly(event, firstname, regStr, 0);
  });

  lastname.addEventListener('keyup', (event) => {
    isOnly(event, lastname, regStr, 1);
  });

  age.addEventListener('keyup', (event) => {
    isOnly(event, age, regNum, 2);
  });

  function isOnly(event, element, reg, count) {
    if (reg.test(event.target.value)) {
      element.classList.remove("virsta-invalid");
      element.classList.add("virsta-valid");
      list_flag[count] = true;
    } else {
      element.classList.remove("virsta-valid");
      element.classList.add("virsta-invalid");
      list_flag[count] = false;
    }
  }

  button.addEventListener('click', (event) => {
    if(list_flag[0] && list_flag[1] && list_flag[2]) demo.style.display = "inline";
    else demo.style.display = "none";
  })

</script>
</body>
</html>
